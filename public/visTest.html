<!doctype html>
<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Vis</title>
  <script src="http://code.jquery.com/jquery.js></script>
 <!-- 
  <script src="initialise"></script>
  	<script data-main="js/requireMain" src="requirejs/require.js"></script>
  -->
 	
  	<link href="fort-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
  	<script type="text/javascript" src="vis/vis.js"></script>
	<link href="vis/vis.css" rel="stylesheet" type="text/css" />

   	<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="bootstrap/js/bootstrap.min.js"></script>
 
  <script type="text/javascript">
    var data = null;
    var graph = null;

    function custom(x, y) {
      return (Math.sin(x/50) * Math.cos(y/50) * 50 + 50);
    }

    // callback function, called when the camera position has changed
    function onCameraPositionChange() {
      // adjust the values of startDate and endDate
      var pos = graph.getCameraPosition();
      document.getElementById('horizontal').value = parseFloat(pos.horizontal.toFixed(3));
      document.getElementById('vertical').value   = parseFloat(pos.vertical.toFixed(3));
      document.getElementById('distance').value   = parseFloat(pos.distance.toFixed(3));
    }

    // set the camera position
    function setCameraPosition() {
      var horizontal = parseFloat(document.getElementById('horizontal').value);
      var vertical = parseFloat(document.getElementById('vertical').value);
      var distance = parseFloat(document.getElementById('distance').value);
      var pos = {
        horizontal: horizontal,
        vertical: vertical,
        distance: distance
      };
      graph.setCameraPosition(pos);

      // retrieve the camera position again, to get the applied values
      onCameraPositionChange();
    }

    // Called when the Visualization API is loaded.
    function drawVisualization() {
      // Create and populate a data table.
      data = new vis.DataSet();
      // create some nice looking data with sin/cos
      var steps = 50;  // number of datapoints will be steps*steps
      var axisMax = 314;
      var axisStep = axisMax / steps;
      for (var x = 0; x < axisMax; x+=axisStep) {
        for (var y = 0; y < axisMax; y+=axisStep) {
          var value = custom(x,y);
          data.add([
            {x:x,y:y,z:value,t:0,style:value}
          ]);
        }
      }

      // specify options
      var options = {
        width:  '600px',
        height: '600px',
        style: 'surface',
        showPerspective: true,
        showGrid: true,
        showShadow: false,
        keepAspectRatio: true,
        verticalRatio: 0.5
      };

      // create our graph
      var container = document.getElementById('mygraph');
      graph = new vis.Graph3d(container, data, options);

      graph.on('cameraPositionChange', onCameraPositionChange);
    }
  </script>
</head>

<body onload="console.log('onload');drawVisualization();console.log('onload completed')">

<div class="btn-group open">
  <a class="btn btn-primary" href="#"><i class="fa fa-user fa-fw"></i> User</a>
  <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
    <span class="fa fa-caret-down" title="Toggle dropdown menu"></span>
  </a>
  <ul class="dropdown-menu">
    <li><a href="#"><i class="fa fa-pencil fa-fw"></i> Edit</a></li>
    <li><a href="#"><i class="fa fa-trash-o fa-fw"></i> Delete</a></li>
    <li><a href="#"><i class="fa fa-ban fa-fw"></i> Ban</a></li>
    <li class="divider"></li>
    <li><a href="#"><i class="fa fa-unlock"></i> Make admin</a></li>
  </ul>
</div>

<h1>Graph 3d camera position</h1>
<table>
  <tr>
    <td>Horizontal angle (0 to 2*pi)</td>
    <td><input type="text" id="horizontal" value="1.0"></td>
  </tr>
  <tr>
    <td>Vertical angle (0 to 0.5*pi)</td>
    <td><input type="text" id="vertical" value="0.5"></td>
  </tr>
  <tr>
    <td>Distance (0.71 to 5.0)</td>
    <td><input type="text" id="distance" value="1.7"></td>
  </tr>
  <tr>
    <td></td>
    <td><input type="button" value="Set" onclick="setCameraPosition();"></td>
  </tr>
</table>

<div id="mygraph"></div>
<div id="info"></div>
<div id="visualization"></div>
<div id="network"></div>

<script type="text/javascript">
console.log('doing time');
	var visOptions= {
		Network: {			
			}
	};

  var data1 = [
    	{id: 1, content: 'item 1', start: '2013-04-20'},
    	{id: 2, content: 'item 2', start: '2013-04-14'},
    	{id: 3, content: 'item 3', start: '2013-04-18'},
    	{id: 4, content: 'item 4', start: '2013-04-16', end: '2013-04-19'},
    	{id: 5, content: 'item 5', start: '2013-04-25'},
    	{id: 6, content: 'item 6', start: '2013-04-27'}
  ];
  	var timeline = new vis.Timeline(document.getElementById('visualization'), data1
		  ,  {
      orientation: "top",
      start: "2013-03-10T04:00:00.000Z",
      end: "2013-05-26T04:00:00.000Z"
  		});
  	
  
  var nodes = new vis.DataSet([
                               {id: 1, label: 'Node 1'},
                               {id: 2, label: 'Node 2'},
                               {id: 3, label: 'Node 3'},
                               {id: 4, label: 'Node 4',cid:1},
                               {id: 5, label: 'Node 5',cid:1}
                           ]);

   var edges = new vis.DataSet([
                               {from: 1, to: 3},
                               {from: 1, to: 2},
                               {from: 2, to: 4},
                               {from: 2, to: 5}
                           ]);

   
   
   var network = new vis.Network(document.getElementById('network'), {nodes: nodes,edges: edges}, {});
 network.clustering.cluster({
			   joinCondition:function(nodeOptions) {
				     return nodeOptions.cid === 1;
				   }
 	});
</script>

</body>
</html>
